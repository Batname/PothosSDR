diff --git a/lib/encoder_impl.cc b/lib/encoder_impl.cc
index cc387bc..0f5b8e1 100644
--- a/lib/encoder_impl.cc
+++ b/lib/encoder_impl.cc
@@ -18,6 +18,13 @@
 #include "config.h"
 #endif
 
+#if defined(_MSC_VER) && !defined(NOMINMAX)
+#  define NOMINMAX //allow std::min/max()
+#  if _MSC_VER < 1800 //nearbyint for vc11
+#    define nearbyint(x) ((int) ((x)+0.5))
+#  endif
+#endif
+
 #include "encoder_impl.h"
 #include "constants.h"
 #include <gnuradio/io_signature.h>
@@ -402,7 +409,7 @@ void encoder_impl::prepare_group2(const bool AB) {
 void encoder_impl::prepare_group1a(void) {
 	std::cout << "preparing group 1" << std::endl;
 	//infoword[1] = infoword[1] | (1 << 4); // TMC in 8A
-	infoword[2] = (0b10000000 << 8) | 0xE0;
+	infoword[2] = (0x80 << 8) | 0xE0;
 	infoword[3] = 0; // time
 }
 
